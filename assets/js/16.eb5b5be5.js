(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{413:function(t,a,s){"use strict";s.r(a);var g=s(29),e=Object(g.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"容器服务kubernetes的使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器服务kubernetes的使用"}},[t._v("#")]),t._v(" 容器服务Kubernetes的使用")]),t._v(" "),s("p",[t._v("打开阿里云选择【"),s("code",[t._v("容器服务Kubernetes版")]),t._v("】并进入")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxdgz7csroj311d0u0ado.jpg",alt:"image-20211214170320008"}})]),t._v(" "),s("h2",{attrs:{id:"节点扩容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#节点扩容"}},[t._v("#")]),t._v(" 节点扩容")]),t._v(" "),s("p",[t._v("进入"),s("code",[t._v("集群")]),t._v(" -> "),s("code",[t._v("节点管理")]),t._v(" -> "),s("code",[t._v("节点")]),t._v(" -> "),s("code",[t._v("集群扩容")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxdh3wu3ixj31oq0u0teg.jpg",alt:"image-20211214170753951"}})]),t._v(" "),s("h2",{attrs:{id:"应用管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#应用管理"}},[t._v("#")]),t._v(" 应用管理")]),t._v(" "),s("h3",{attrs:{id:"创建应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建应用"}},[t._v("#")]),t._v(" 创建应用")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxdhx9ny54j31te0u0wit.jpg",alt:"image-20211214173606897"}})]),t._v(" "),s("p",[t._v("配置参数请参考下图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe7br4q9tj30u01l9n17.jpg",alt:"image-20211215081457106"}})]),t._v(" "),s("h3",{attrs:{id:"更新应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新应用"}},[t._v("#")]),t._v(" 更新应用")]),t._v(" "),s("p",[t._v("更新应用一般都是通过云效Devops的流水线来发布新版本应用")]),t._v(" "),s("p",[t._v("1.打开"),s("a",{attrs:{href:"https://flow.aliyun.com/my",target:"_blank",rel:"noopener noreferrer"}},[t._v("云效Devops"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe7er2887j32l40o8ae8.jpg",alt:"image-20211215081752904"}})]),t._v(" "),s("p",[t._v("2.对于已创建的流水线在更新代码后直接点击运行即可")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe7hxhq25j32l80mc78l.jpg",alt:"image-20211215082056413"}})]),t._v(" "),s("p",[t._v("3.对于未创建的流水线则需要我们创建一个新的流水线")]),t._v(" "),s("p",[t._v("点击新建流水线")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe7iee3uvj32la0n4jvn.jpg",alt:"image-20211215082124195"}})]),t._v(" "),s("p",[t._v("任选一个企业模版")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe7kkvw5pj31rt0u0q7y.jpg",alt:"image-20211215082329541"}})]),t._v(" "),s("p",[t._v("以后端模版为例")]),t._v(" "),s("p",[t._v("配置代码库")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe7mxqm4rj31lu0u077i.jpg",alt:"image-20211215082544446"}})]),t._v(" "),s("p",[t._v("配置docker推送的景象仓库")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe7omi2ogj31li0u0diu.jpg",alt:"image-20211215082722519"}})]),t._v(" "),s("p",[t._v("配置kubectl发布参数")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe7proi1uj31lk0u0770.jpg",alt:"image-20211215082828780"}})]),t._v(" "),s("p",[t._v("配置完成之后点击保存并运行")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe7qgqd3vj32kl0u077k.jpg",alt:"image-20211215082909014"}})]),t._v(" "),s("h3",{attrs:{id:"版本回退"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#版本回退"}},[t._v("#")]),t._v(" 版本回退")]),t._v(" "),s("p",[t._v("找到工作负载，点击应用 -> 更多 -> 回滚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe7rmc3tuj31xc0u00xv.jpg",alt:"image-20211215083015191"}})]),t._v(" "),s("p",[t._v("找到对应的版本号点击回滚即可")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe7t2ls4kj31l50u0443.jpg",alt:"image-20211215083139549"}})]),t._v(" "),s("h3",{attrs:{id:"日志查询"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#日志查询"}},[t._v("#")]),t._v(" 日志查询")]),t._v(" "),s("p",[t._v("进入应用详情页")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe7ui6ctoj320h0u0q7x.jpg",alt:"image-20211215083301816"}})]),t._v(" "),s("p",[t._v("切换到日志选项即可")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe7vaz7rkj31kz0u07de.jpg",alt:"image-20211215083348052"}})]),t._v(" "),s("h3",{attrs:{id:"容器扩缩"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器扩缩"}},[t._v("#")]),t._v(" 容器扩缩")]),t._v(" "),s("p",[t._v("1.临时方案（简单快捷，持久化方案不建议使用，因为一旦应用更新便会回到原来的副本数量）")]),t._v(" "),s("p",[t._v("点击伸缩")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe8069huaj32l20to7b0.jpg",alt:"image-20211215083828754"}})]),t._v(" "),s("p",[t._v("输入副本数量")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe80tpxiej32ep0u0n3j.jpg",alt:"image-20211215083906017"}})]),t._v(" "),s("p",[t._v("2.持久化方案（可用于长期策略，永久生效，需要配置代码）")]),t._v(" "),s("p",[t._v("找到项目的配置文件，修改代码中的副本数量，最后再进行"),s("a",{attrs:{href:"#%E6%9B%B4%E6%96%B0%E5%BA%94%E7%94%A8"}},[t._v("更新应用")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe84owa2sj326i0u0gqt.jpg",alt:"image-20211215084249185"}})]),t._v(" "),s("h2",{attrs:{id:"证书配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#证书配置"}},[t._v("#")]),t._v(" 证书配置")]),t._v(" "),s("p",[t._v("一般我们项目API的域名证书即将到期之后需要重新配置新的证书")]),t._v(" "),s("p",[t._v("点击配置管理 -> 密保字典")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe8a39lr3j32l80s6te0.jpg",alt:"image-20211215084800906"}})]),t._v(" "),s("p",[t._v("输入域名和nginx证书的cert和key")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe8bby2aqj32l80t4wl9.jpg",alt:"image-20211215084912598"}})]),t._v(" "),s("h2",{attrs:{id:"域名配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#域名配置"}},[t._v("#")]),t._v(" 域名配置")]),t._v(" "),s("p",[t._v("域名配置一般是用于暴露服务的外部访问")]),t._v(" "),s("p",[t._v("点击网络 -> 路由 -> 创建")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe8g84l7rj32la0py0yc.jpg",alt:"image-20211215085353726"}})]),t._v(" "),s("p",[t._v("配置域名、路径、服务和证书之后即可")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxe8iet2emj30u00xz413.jpg",alt:"image-20211215085600074"}})]),t._v(" "),s("blockquote",[s("p",[t._v("这里需要注意的是下方有个注解，一般不用配置，但这个也很重要，主要是设置k8s内部nginx的访问策略，比如这里就是设置代理访问的重定向路由策略（http://ma.ecolovo.com/api/xxx -> http://qbl-admin-svc/xxx）")]),t._v(" "),s("p",[t._v("具体规则请参考：")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/?spm=a2c4g.11186623.0.0.6d477faaPuHmVz",target:"_blank",rel:"noopener noreferrer"}},[t._v("Annotations"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);